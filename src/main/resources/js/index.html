<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ConradLampe</title>
</head>
<body>
<h1></h1>
<p>Bro</p>
<button onclick="lampe1Av()">Lampe 1 av</button>
<button onclick="lampe1Paa()">Lampe1 paa</button>
<button onclick="conradsLampeRoed()">Conrad Rød</button>
<button onclick="conradsLampeBlaa()">Blå</button>
<button onclick="conradsLampeSkifteFarger()">ConradsLampeSkifterFarger</button>
<button onclick="conradsLampeGroenn()">Groenn</button>
<button onclick="conradsLampeOransje()">Oransje</button>
</body>

<script>
    var conradsLampe = "65548";

    function lampe1Av() {
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "https://192.168.86.41:8443/bulb/" + conradsLampe + "/off");
        xhttp.send();
    }

    function lampe1Paa() {
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "https://192.168.86.41:8443/bulb/" + conradsLampe + "/on");
        xhttp.send();
    }


    function conradsLampeRoed() {
        conradsLampeRGB(100, 0,0);

    }

    function conradsLampeBlaa() {
        conradsLampeRGB(0, 0, 100);
    }

    function conradsLampeGroenn() {
        conradsLampeRGB(0, 100, 0);
    }

    function conradsLampeOransje() {
        conradsLampeRGB(255, 165, 0);
    }

    function conradsLampeRGB(r, g, b) {
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "https://192.168.86.41:8443/bulb/" + conradsLampe + "/color/r/" + r + "/g/" + g + "/b/" + b);
        xhttp.send();
    }

    function conradsLampeSkifteFarger() {
            sleep()
                .then(conradsLampeRoed)
                .then(sleep)
                .then(conradsLampeBlaa)
                .then(sleep)
                .then(conradsLampeGroenn)
                .then(sleep)
                .then(conradsLampeOransje)
                .then(sleep)
                .then(conradsLampeGroenn)
                .then()
    }


    const sleep = () => {
        return new Promise(resolve => setTimeout(resolve, 750))
    }

    /*
          TODO:
          loope
          hvordan få den til å stoppe på samme farge som den startet, når den sykler gjennom farger? - spørre, og variabler
     */

</script>

</html>


