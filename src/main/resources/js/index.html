<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ConradLampe</title>
</head>
<body>
<h1>Conrads lys</h1>
<p></p>
<button onclick="lampe1Av() ">Lampe 1 av</button>
<button onclick="lampe1Paa()">Lampe1 paa</button>
<h1>farge</h1>
<button onclick="conradsLampeRoed()">Rød</button>
<button onclick="conradsLampeBlaa()">Blå</button>
<button onclick="conradsLampeSkifteFarger()">conradsLampeSkifteFarger</button>
<button onclick="conradsLampeGroenn()">Grønn</button>
<button onclick="conradsLampeOransje()">Oransje</button>
<button onclick="conradsLampeFinOgVarm()">Fin og varm</button>
<button onclick="conradsLampeSterkRoed()">sterk rød </button>
<button onclick="conradsLampeLyseGroenn()">lyse grønn</button>  
<button onclick="conradsLampeRosa()">Rosa</button>
<button onclick="conradsLampeSterkBlaa()">Sterk blå</button>
<button onclick="conradsLampeGroennGul()">Grønn/Gul</button>
<button onclick="conradsLampeSkifteFarger2()">Av og på</button> <--(Jobber på)
<button onclick="conradsLampeMoorkeLilla()">Mørke lilla</button>
<button onclick="conradsLampeGul()">Gul</button>
<button onclick="conradsLampeGraa()">Grå</button>
<button onclick="conradsLampeSterk()">Sterkere</button>
<button onclick="conradsLampeSvakere()">Svakere</button>
<button onclick="conradsLampeMidtIMellom()">Midt i mellom</button>
<button onclick="conradsLampeTurkis()">Turkis</button>
<button onclick="sakteAv()">Sakte av</button>
<button onclick="random()">Random</button>


</body>
</html>

<script>
    var conradsLampe = "65568";

    function lampe1Av() {
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "https://192.168.86.41:8443/bulb/" + conradsLampe + "/off");
        xhttp.send();
    }

    function lampe1Paa() {
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "https://192.168.86.41:8443/bulb/" + conradsLampe + "/on");
        xhttp.send();
    }


    function conradsLampeRoed() {
        conradsLampeRGB(100, 0,0);

    }

    function conradsLampeBlaa() {
        conradsLampeRGB(0, 0, 100);
    }

    function conradsLampeGroenn() {
        conradsLampeRGB(0, 100, 0);
    }

    function conradsLampeOransje() {
        conradsLampeRGB(255, 165, 0);
    }

    function conradsLampeRGB(r, g, b) {
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "https://192.168.86.41:8443/bulb/" + conradsLampe + "/color/r/" + r + "/g/" + g + "/b/" + b);
        xhttp.send();
    }
    function conradsLampeFinOgVarm() {
        conradsLampeRGB(230, 200, 100);
    }

    function conradsLampeSterkRoed() {
        conradsLampeRGB(200, 50, 0);

    }
    function conradsLampeLyseGroenn() {
        conradsLampeRGB(0, 250, 0);
    }
    function conradsLampeRosa() {
        conradsLampeRGB(254, 0, 254);
    }
    function conradsLampeSterkBlaa() {
        conradsLampeRGB(0, 0, 254);
    }

    function conradsLampeGroenn() {
        conradsLampeRGB(0, 254, 0)       ;

    }
    function conradsLampeSkifteFarger2() {
        sleep()
            .then()
            .then(sleep)
            .then()

    }
    function conradsLampeGraa() {
        conradsLampeRGB(128, 128, 128)

    }
    function intensity (i) {
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "https://192.168.86.41:8443/bulb/" + conradsLampe + "/intensity/" + i);
        xhttp.send();

    }
    function conradsLampeSterk() {
        intensity(254);

    }
    function conradsLampeSvakere() {
        intensity(1);


    }
    function conradsLampeMidtIMellom() {
        intensity(127);
    }

    function sakteAv() {
        sleep()
            .then(sleep)
            .then(conradsLampeSterk)
            .then(sleep)
            .then(conradsLampeMidtIMellom)
            .then(sleep)
            .then(lampe1Av)
    }

    function conradsLampeGul() {
        conradsLampeRGB(255, 200, 0)

    }

    function conradsLampeMoorkeLilla() {
        conradsLampeRGB(160, 32, 240);
    }

    function conradsLampeTurkis() {
        conradsLampeRGB(64, 224, 208);

    }
    function random() {
        var r = Math.floor ((Math.random() * 254) + 0);
        var g = Math.floor ((Math.random() * 254) + 0);
        var b = Math.floor ((Math.random() * 254) + 0);
        RGB(r, g, b);

    }




    function conradsLampeSkifteFarger() {
        sleep()
            .then(conradsLampeRoed)
            .then(sleep)
            .then(conradsLampeBlaa)
            .then(sleep)
            .then(conradsLampeGroenn)
            .then(sleep)
            .then(conradsLampeOransje)
            .then(sleep)
            .then(conradsLampeGroenn)
            .then(sleep)
            .then(conradsLampeSterkRoed)
            .then(sleep)
            .then(conradsLampeMoorkeLilla)
            .then(sleep)
            .then(conradsLampeSterkBlaa)
            .then(sleep)
            .then(conradsLampeGul)
            .then(sleep)
            .then()

    }


    const sleep = () => {
        return new Promise(resolve => setTimeout(resolve, 750))
    }

    /*
          TODO:
          loope
          hvordan få den til å stoppe på samme farge som den startet, når den sykler gjennom farger? - spørre, og variabler
          knapper som pluss / minus på R, G og B, forenklere å finne farger
     */

</script>


